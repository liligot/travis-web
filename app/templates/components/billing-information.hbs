<div class='billing-form'>
  <div class='flex flex--col flex--v-center flex--center'>
    <p class='subscribe-message'>
      <span>
        Looking for a plan that meet your needs?
      </span>
      Subscribe now!
    </p>
    <div class='get-plan flex flex--col flex--v-center flex--justify-center'>
      <p>get a plan</p>
      {{svg-jar 'icon-arrow-down' class='icon icon-get-plan'}}
    </div>
  </div>
  <TravisForm @onSubmit={{action next}} as |Form|>
    <div data-test-billing-form>
      <h2 data-test-billing-info-title>
        Billing Cycle
      </h2>
      <div class='flex form-elem flex--v-center flex-wrap billing-plan-switch'>
        <div>
          <Form.field
            @disableFrame={{true}}
            class='display-value-switch'
            @value={{showAnnual}}
            @onChange={{action (mut showAnnual)}} as |Field|
          >
            <Field.switch 
              @text={{true}} 
              @offText='Monthly'
              @onText='Yearly'
            />
          </Form.field>
        </div>
        <div class='billing-plan-switch m-l-s'>
          {{#if showMonthly}}
            <p>
              Switch to annual billing to recieve
              <span class='font--italic font--bolder'>
                one month free!
              </span>
            </p>
          {{/if}}
        </div>
      </div>
      <h2 data-test-choose-plan-heading>
        Choose your plan
      </h2>
      {{billing-select-plan
        displayedPlans=displayedPlans
        selectedPlan=selectedPlan
        showAnnual=showAnnual
      }}
      <h2>
        Contact details
      </h2>
      <div class='flex flex--col flex-md-row'>
        <div class='full-width form-elem inline-form-elem'>
          <Form.field
            @label='First Name'
            @value={{newSubscription.billingInfo.firstName}}
            @required={{true}}
            @showRequiredMark={{true}}
            @showValidationStatusIcons={{false}}
            @onChange={{action (mut newSubscription.billingInfo.firstName)}} as |Field|
          >
            <Field.input @name='firstname'/>
          </Form.field>
        </div>
        <div class='full-width form-elem'>
          <Form.field
            @label='Last Name'
            @value={{newSubscription.billingInfo.lastName}}
            @required={{true}}
            @showRequiredMark={{true}}
            @showValidationStatusIcons={{false}}
            @onChange={{action (mut newSubscription.billingInfo.lastName)}} as |Field|
          >
            <Field.input @name='lastname'/>
          </Form.field>
        </div>
      </div>
      <div class='form-elem billing-optional-field'>
        <Form.field
          @label='Company Name'
          @value={{newSubscription.billingInfo.company}}
          @showValidationStatusIcons={{false}}
          @onChange={{action (mut newSubscription.billingInfo.company)}} as |Field|
        >
          <Field.input @name='companyName'/>
        </Form.field>
      </div>
      <div class='form-elem'>
        <Form.field
          @label='Billing Email Address'
          @value={{newSubscription.billingInfo.billingEmail}}
          @required={{true}}
          @showRequiredMark={{true}}
          @validator={{form-validator Form.validators.email}}
          @showValidationStatusIcons={{false}}
          @onChange={{action (mut newSubscription.billingInfo.billingEmail)}} as |Field|
        >
          <Field.input @name='email'/>
        </Form.field>
      </div>
      <h2>
        Billing address
      </h2>
      <div class='flex flex--col flex-md-row'>
        <div class='full-width form-elem inline-form-elem'>
          <Form.field
            @label='Street Address'
            @value={{newSubscription.billingInfo.address}}
            @required={{true}}
            @showRequiredMark={{true}}
            @showValidationStatusIcons={{false}}
            @onChange={{action (mut newSubscription.billingInfo.address)}} as |Field|
          >
            <Field.input @name='address'/>
          </Form.field>
        </div>
        <div class='full-width form-elem'>
          <Form.field
            @label='Suite,Apt'
            @value={{newSubscription.billingInfo.address2}}
            @required={{true}}
            @showRequiredMark={{true}}
            @showValidationStatusIcons={{false}}
            @onChange={{action (mut newSubscription.billingInfo.address2)}} as |Field|
          >
            <Field.input @name='suite'/>
          </Form.field>
        </div>
      </div>
      <div class='flex flex--col flex-md-row'>
        <div class='full-width form-elem inline-form-elem'>
          <Form.field
            @label='City'
            @value={{newSubscription.billingInfo.city}}
            @required={{true}}
            @showRequiredMark={{true}}
            @showValidationStatusIcons={{false}}
            @onChange={{action (mut newSubscription.billingInfo.city)}} as |Field|
          >
            <Field.input @name='city'/>
          </Form.field>
        </div>
        <div class='full-width form-elem'>
          <Form.field
            @label='Zip Code'
            @value={{newSubscription.billingInfo.zipCode}}
            @required={{true}}
            @showRequiredMark={{true}}
            @showValidationStatusIcons={{false}}
            @onChange={{action (mut newSubscription.billingInfo.zipCode)}} as |Field|
          >
            <Field.input @name='zip'/>
          </Form.field>
        </div>
      </div>
      <div class='form-elem select' data-billing-form-select>
        <Form.field
          @label='Country'
          @value={{newSubscription.billingInfo.country}}
          @required={{true}}
          class='billing-country'
          @showRequiredMark={{true}}
          @showValidationStatusIcons={{false}}
          @onChange={{action (mut newSubscription.billingInfo.country)}} as |Field|
        >
          <Field.select
            @placeholder='Select country'
            @options={{countries}} as |country|
          >
            {{country}}
          </Field.select>
        </Form.field>
      </div>
      <div class='form-elem'>
        <Form.field
          @label='Vat Id'
          @value={{newSubscription.billingInfo.vatId}}
          @required={{true}}
          @showRequiredMark={{true}}
          @showValidationStatusIcons={{false}}
          @onChange={{action (mut newSubscription.billingInfo.vatId)}} as |Field|
        >
          <Field.input @name='vat'/>
        </Form.field>
      </div>
      <div class='form-elem'>
        <button
          onclick={{form.submit}}
          class='button--blue'
          data-test-proceed-to-payment-button
        >
          Proceed to Payment
        </button>
      </div>
    </div>
  </TravisForm>
</div>
